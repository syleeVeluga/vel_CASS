# **ì œí’ˆ ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ (PRD) \- Lite Version**

| ë¬¸ì„œ ë²ˆí˜¸ | CASS-Lite-v1.0 | ì‘ì„±ì¼ | 202X. XX. XX |
| :---- | :---- | :---- | :---- |
| **ëª©í‘œ** | **ê°œì¸ìš© ì •ë°€ ë¶„ì„ ë„êµ¬ (Stand-alone)** | **í”Œë«í¼** | Python Streamlit (Local Web) |
| **í•µì‹¬ ë³€ê²½** | **DB ë° ë¹„ë™ê¸° ì œê±°**, **ë‹¨ì¼ íŒŒì¼ ì§‘ì¤‘**, **ê²€ì¦ ë¡œì§ ìœ ì§€** |  |  |

## ---

**1\. ê°œìš” (Overview)**

### **1.1 ë°°ê²½ ë° ëª©ì **

* **ë°°ê²½:** ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ë„ì… ì „, ìˆ˜ì‚¬ê´€ ê°œì¸ì´ ë¡œì»¬ í™˜ê²½ì—ì„œ ì¦‰ì‹œ í™œìš©í•  ìˆ˜ ìˆëŠ” ê°€ë²¼ìš´ ë„êµ¬ê°€ í•„ìš”í•¨.  
* **ëª©ì :** ë³„ë„ì˜ ì„œë²„ë‚˜ DB ì„¤ì¹˜ ì—†ì´, **PDF ì¡°ì„œ íŒŒì¼**ì„ ì—…ë¡œë“œí•˜ë©´ ì¦‰ì‹œ ë¬¸ë‹µ(Q\&A)ìœ¼ë¡œ ë³€í™˜í•˜ê³ , LLMì„ í†µí•´ í˜ì˜ì ê³¼ ëª¨ìˆœì„ ì°¾ì•„ë‚´ëŠ” "AI ìˆ˜ì‚¬ ë³´ì¡° ë„êµ¬" êµ¬í˜„.  
* **ì°¨ë³„ì :** ì†ë„ë³´ë‹¤ëŠ” \*\*ì •í™•ë„(Accuracy)\*\*ì™€ \*\*íˆ¬ëª…ì„±(Transparency)\*\*ì— ì§‘ì¤‘. ì‚¬ìš©ìê°€ íŒŒì‹±ëœ ë°ì´í„°ì™€ AIì˜ íŒë‹¨ ê·¼ê±°ë¥¼ ëˆˆìœ¼ë¡œ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•¨.

### **1.2 íƒ€ê²Ÿ ì›Œí¬í”Œë¡œìš°**

1. **Upload:** ìˆ˜ì‚¬ê´€ì´ PDF ì¡°ì„œë¥¼ ì—…ë¡œë“œ.  
2. **Review:** ì‹œìŠ¤í…œì´ íŒŒì‹±í•œ ë¬¸ë‹µ í‘œ(Table)ë¥¼ ë³´ê³ , ì˜¤íƒ€ë‚˜ ë¬¸ë‹µ ë¶„ë¦¬ê°€ ì˜ëª»ëœ ê³³ì´ ì—†ëŠ”ì§€ ëˆˆìœ¼ë¡œ í™•ì¸.  
3. **Analyze:** "ë¶„ì„ ì‹œì‘" ë²„íŠ¼ì„ ëˆŒëŸ¬ AIê°€ 2ë‹¨ê³„(ë¶„ì„-ê²€ì¦)ë¡œ ìƒì„±í•œ ë¦¬í¬íŠ¸ í™•ì¸.

## ---

**2\. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (Simplified)**

ë°ì´í„°ë² ì´ìŠ¤(DB) ì—†ì´ \*\*ë©”ëª¨ë¦¬(Session State)\*\*ì™€ \*\*ë¡œì»¬ íŒŒì¼(CSV)\*\*ë§Œ ì‚¬ìš©í•˜ì—¬ êµ¬ì¡°ë¥¼ ê²½ëŸ‰í™”í•©ë‹ˆë‹¤.

* **Frontend:** Streamlit (ì§ê´€ì ì¸ ì›¹ ì¸í„°í˜ì´ìŠ¤)  
* **Logic:** Python (Regex Parsing \+ LLM Chaining Loop)  
* **Storage:**  
  * **Input:** PDF íŒŒì¼  
  * **Parsing**: https://github.com/docling-project/docling  ì‚¬ìš©
  * **Interim:** Pandas DataFrame (In-Memory)  
  * **Output:** ë¡œì»¬ CSV íŒŒì¼ (./output/parsed\_result.csv)

## ---

**3\. ì£¼ìš” ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)**

### **3.1 íŒŒì¼ íŒŒì‹± ë° ë°ì´í„° ê²€ì¦ (Parsing & Viewer)**

* **FR-01 (ì •ë°€ íŒŒì‹±):**  
  * https://github.com/docling-project/docling ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³ , ì •ê·œì‹ r"^(ë¬¸|ë‹µ)\\s\*\[:\]?\\s\*(.\*)"ì„ ì ìš©í•˜ì—¬ ì§ˆë¬¸(Q)ê³¼ ë‹µë³€(A)ì„ êµ¬ì¡°í™”í•œë‹¤.  
  * íŒ¨í„´ì´ ì—†ëŠ” ì¤„ì€ ì´ì „ ë°œì–¸ì˜ ì—°ì†ìœ¼ë¡œ ê°„ì£¼í•˜ì—¬ ìë™ ë³‘í•©í•œë‹¤.  
* **FR-02 (ë°ì´í„° ì—ë””í„°):**  
  * íŒŒì‹±ëœ ê²°ê³¼ë¥¼ ë‹¨ìˆœ ì¡°íšŒê°€ ì•„ë‹Œ \*\*ìˆ˜ì • ê°€ëŠ¥í•œ í…Œì´ë¸”(st.data\_editor)\*\*ë¡œ ì¶œë ¥í•œë‹¤.  
  * *ì´ìœ :* ì •ê·œì‹ìœ¼ë¡œ ê±¸ëŸ¬ì§€ì§€ ì•ŠëŠ” íŠ¹ì´í•œ ì¡°ì„œ í˜•ì‹ì„ ìˆ˜ì‚¬ê´€ì´ ë¶„ì„ ì „ì— ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ë¶„ì„ ì •í™•ë„ë¥¼ ë³´ì¥í•¨.  
* **FR-03 (CSV ë¡œì»¬ ì €ì¥):**  
  * í™•ì •ëœ íŒŒì‹± ë°ì´í„°ëŠ” ì¦‰ì‹œ ë¡œì»¬ ê²½ë¡œì— CSVë¡œ ì €ì¥ë˜ì–´, ì—‘ì…€ì—ì„œ ë³„ë„ë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

### **3.2 ë¶„ì„ ë° ê²€ì¦ íŒŒì´í”„ë¼ì¸ (Core Logic)**

ëŒ€ëŸ‰ ì²˜ë¦¬ëŠ” ì œì™¸ë˜ì—ˆìœ¼ë‚˜, **í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€**ë¥¼ ìœ„í•œ ì²´ì´ë‹ ë¡œì§ì€ í•„ìˆ˜ì ìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.

* **FR-04 (ìŠ¤ë§ˆíŠ¸ ì²­í‚¹):**  
  * ì¡°ì„œë¥¼ **20 ë¬¸ë‹µ(Q\&A) ë‹¨ìœ„**ë¡œ ìë¥´ë˜, ë¬¸ë§¥ ë‹¨ì ˆ ë°©ì§€ë¥¼ ìœ„í•´ **3ê°œ ë¬¸ë‹µì„ ì˜¤ë²„ë©(Overlap)** ì‹œí‚¨ë‹¤.  
* **FR-05 (2-Step Verification Chain):**  
  * **Step 1 (Analyst):** í˜ì˜ì  ë° ëª¨ìˆœì  ì¶”ì¶œ. "ë°˜ë“œì‹œ \*\*\[ë¬¸15\]\*\*ì™€ ê°™ì´ ì¶œì²˜ë¥¼ í‘œê¸°í•˜ë¼"ëŠ” ì œì•½ ì¡°ê±´ ë¶€ì—¬.  
  * **Step 2 (Critic):** ì¶”ì¶œëœ í˜ì˜ì ì´ í•´ë‹¹ ì²­í¬(ì›ë³¸ í…ìŠ¤íŠ¸)ì— ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ëŒ€ì¡°.  
    * ê·¼ê±°ê°€ ì—†ìœ¼ë©´ â†’ **ì‚­ì œ(Drop)**.  
    * ê·¼ê±°ê°€ ìˆìœ¼ë©´ â†’ **í†µê³¼(Pass)** ë° í•œêµ­ì–´ ë²ˆì—­.  
* **FR-06 (ê²°ê³¼ ë¦¬í¬íŒ…):**  
  * ê²€ì¦ëœ ì •ë³´ë§Œ ëª¨ì•„ **Markdown**ìœ¼ë¡œ ì¶œë ¥í•˜ë©°, ê° ì£¼ì¥ ëì— (ê·¼ê±°: ë¬¸15\) íƒœê·¸ë¥¼ ìœ ì§€í•œë‹¤.

## ---

**4\. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì „ëµ**

ëª¨ë“  ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ëŠ” \*\*ì˜ì–´(English)\*\*ë¡œ ì‘ì„±í•˜ì—¬ LLMì˜ ì¶”ë¡  ì„±ëŠ¥ì„ ìµœì í™”í•˜ê³ , ìµœì¢… ì¶œë ¥ë§Œ í•œê¸€ë¡œ ë°›ìŠµë‹ˆë‹¤.

**Role 1: Analyst (ë¶„ì„ê°€)**

"You are an expert Criminal Profiler. Analyze the provided interrogation chunk. Identify 'Admissions of Guilt', 'Contradictions', and 'Key Alibis'. **You MUST cite the Q/A Index (e.g., \[Q12\]) for every finding.** Output the findings in JSON format."

**Role 2: Critic (ê°ì‚¬ê´€ \- í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€)**

"You are a Strict Fact-Checker. Compare the 'Analyst Findings' against the 'Source Text'.

1. If a finding is NOT explicitly supported by the text, **DELETE it**.  
2. If supported, translate the finding into natural **Korean**.  
   Output only the verified facts."

## ---

**5\. UI/UX ë””ìì¸ (Single Page App)**

**Streamlit í™”ë©´ êµ¬ì„±:**

1. **Sidebar:**  
   * API Key ì…ë ¥ (OpenAI / Anthropic / Gemini)  
   * ëª¨ë¸ ì„ íƒ (GPT-4o / Claude 3.5 Sonnet)  
2. **Main Section:**  
   * **\[ 1\. ì¡°ì„œ ì—…ë¡œë“œ \]**: íŒŒì¼ ì—…ë¡œë”.  
   * **\[ 2\. ë°ì´í„° í™•ì¸ ë° ìˆ˜ì • \]**:  
     * st.data\_editorë¥¼ ì‚¬ìš©í•˜ì—¬ ì—‘ì…€ ì‹œíŠ¸ì²˜ëŸ¼ í‘œì‹œ.  
     * ì‚¬ìš©ìê°€ ì˜¤íƒ€ë¥¼ ìˆ˜ì •í•˜ë©´ ì¦‰ì‹œ ë°˜ì˜.  
     * ğŸ’¾ CSVë¡œ ë‚´ë³´ë‚´ê¸° ë²„íŠ¼.  
   * **\[ 3\. AI ë¶„ì„ ê²°ê³¼ \]**:  
     * â–¶ï¸ ë¶„ì„ ì‹œì‘ ë²„íŠ¼.  
     * **Log View:** \[ì²­í¬ 1/5\] ë¶„ì„ ì¤‘... \-\> \[ì²­í¬ 1/5\] ê²€ì¦ ì¤‘ (1ê±´ ê¸°ê°ë¨)...  
     * **Result View:**

       * ### **ğŸš¨ í•µì‹¬ í˜ì˜ì **

       * ### **âš¡ ì§„ìˆ  ëª¨ìˆœ**

       * (ê° í•­ëª© í´ë¦­ ì‹œ ìƒì„¸ ê·¼ê±° í‘œì‹œ)

## ---

**6\. ê°œë°œ ë¡œì§ ëª…ì„¸ (Python Sequential Logic)**

ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì œê±°í•˜ê³ , ì§ê´€ì ì¸ **ìˆœì°¨ ë°˜ë³µë¬¸(Loop)** í˜•íƒœë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

Python

import streamlit as st  
import pandas as pd  
import re  
\# ê°€ìƒì˜ LLM í˜¸ì¶œ í•¨ìˆ˜  
from llm\_utils import call\_analyst, call\_critic, call\_reporter 

def main\_lite\_app():  
    st.title("ë²”ì£„ë¶„ì„ ì„ ë³„ ì‹œìŠ¤í…œ (Lite)")

    \# 1\. íŒŒì¼ ì—…ë¡œë“œ ë° íŒŒì‹±  
    uploaded\_file \= st.file\_uploader("ì¡°ì„œ PDF ì—…ë¡œë“œ", type\="pdf")  
    if uploaded\_file:  
        raw\_text \= extract\_text(uploaded\_file)  
        \# íŒŒì‹± ë¡œì§ (ì •ê·œì‹) \-\> DataFrame  
        parsed\_df \= parse\_to\_dataframe(raw\_text)   
          
        \# 2\. ë°ì´í„° í™•ì¸ (ìˆ˜ì • ê°€ëŠ¥ ê¸°ëŠ¥ ì œê³µ)  
        st.subheader("ë°ì´í„° í™•ì¸ (ìˆ˜ì • ê°€ëŠ¥)")  
        edited\_df \= st.data\_editor(parsed\_df, num\_rows="dynamic")  
          
        \# ë¡œì»¬ CSV ìë™ ì €ì¥ (ë°±ì—…ìš©)  
        edited\_df.to\_csv("./output/parsed\_current.csv", index=False)

        \# 3\. ë¶„ì„ ì‹¤í–‰ (ìˆœì°¨ ì²˜ë¦¬)  
        if st.button("ë¶„ì„ ë° ì„ ë³„ ì‹œì‘"):  
            chunks \= create\_chunks(edited\_df, size=20, overlap=3)  
            verified\_facts \= \[\]  
              
            my\_bar \= st.progress(0)  
              
            for i, chunk in enumerate(chunks):  
                \# Step A: ë¶„ì„ (Analyst)  
                draft \= call\_analyst(chunk)  
                  
                \# Step B: ê²€ì¦ (Critic) \- í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì–´  
                verified \= call\_critic(source=chunk, draft=draft)  
                  
                if verified:  
                    verified\_facts.append(verified)  
                  
                \# ì§„í–‰ë¥  ì—…ë°ì´íŠ¸  
                my\_bar.progress((i \+ 1) / len(chunks))  
              
            \# 4\. ê²°ê³¼ ì¢…í•© (Reporter)  
            final\_report \= call\_reporter("\\n".join(verified\_facts))  
            st.markdown(final\_report)

## ---

**7\. ê²€ì¦ ì‹œë‚˜ë¦¬ì˜¤ (Checklist)**

1. **íŒŒì‹± ìˆ˜ì • ê¸°ëŠ¥:** ì •ê·œì‹ì´ ë†“ì¹œ "ë¬¸:"ì„ ì‚¬ìš©ìê°€ UI(data\_editor)ì—ì„œ ì§ì ‘ ìˆ˜ì •í–ˆì„ ë•Œ, ìµœì¢… ë¶„ì„ ê²°ê³¼ì— ìˆ˜ì •ëœ ë‚´ìš©ì´ ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸.  
2. **í• ë£¨ì‹œë„¤ì´ì…˜ ì°¨ë‹¨:** (í…ŒìŠ¤íŠ¸ìš©) í”¼ì˜ìê°€ ë§í•˜ì§€ ì•Šì€ ìë°±ì„ AIê°€ ìƒì„±í–ˆì„ ë•Œ, **Critic ë‹¨ê³„**ì—ì„œ í•´ë‹¹ ë‚´ìš©ì´ ë¦¬í¬íŠ¸ì—ì„œ ì‚¬ë¼ì§€ëŠ”ì§€ ë¡œê·¸ í™•ì¸.  
3. **íŒŒì¼ ì €ì¥:** ë¶„ì„ ì™„ë£Œ í›„ ë¡œì»¬ í´ë”ì— parsed\_current.csv íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸.